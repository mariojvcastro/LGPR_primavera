<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>class DropboxClient - Rails Application Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/dropbox_sdk.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-account_info">#account_info</a>
    
    <li><a href="#method-i-file_copy">#file_copy</a>
    
    <li><a href="#method-i-file_create_folder">#file_create_folder</a>
    
    <li><a href="#method-i-file_delete">#file_delete</a>
    
    <li><a href="#method-i-file_move">#file_move</a>
    
    <li><a href="#method-i-get_file">#get_file</a>
    
    <li><a href="#method-i-get_file_and_metadata">#get_file_and_metadata</a>
    
    <li><a href="#method-i-media">#media</a>
    
    <li><a href="#method-i-metadata">#metadata</a>
    
    <li><a href="#method-i-put_file">#put_file</a>
    
    <li><a href="#method-i-restore">#restore</a>
    
    <li><a href="#method-i-revisions">#revisions</a>
    
    <li><a href="#method-i-search">#search</a>
    
    <li><a href="#method-i-shares">#shares</a>
    
    <li><a href="#method-i-thumbnail">#thumbnail</a>
    
    <li><a href="#method-i-thumbnail_and_metadata">#thumbnail_and_metadata</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./DropController.html">DropController</a>
  
    <li><a href="./DropHelper.html">DropHelper</a>
  
    <li><a href="./Dropbox.html">Dropbox</a>
  
    <li><a href="./DropboxAuthError.html">DropboxAuthError</a>
  
    <li><a href="./DropboxClient.html">DropboxClient</a>
  
    <li><a href="./DropboxError.html">DropboxError</a>
  
    <li><a href="./DropboxNotModified.html">DropboxNotModified</a>
  
    <li><a href="./DropboxSession.html">DropboxSession</a>
  
    <li><a href="./OAuthToken.html">OAuthToken</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class DropboxClient</h1>

  <div id="description" class="description">
    
<p>This is the <a href="Dropbox.html">Dropbox</a> Client API you’ll be
working with most often.  You need to give it a <a
href="DropboxSession.html">DropboxSession</a> which has already been
authorized, or which it can authorize.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="RESERVED_CHARACTERS">RESERVED_CHARACTERS
        
        <dd class="description"><p>From the oauth spec plus “/”.  Slash should not be ecsaped</p>
        
      
      </dl>
    </section>
    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(session, root="app_folder", locale=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Initialize a new <a href="DropboxClient.html">DropboxClient</a>.  You need
to give it a session which has been authorized. See documentation on <a
href="DropboxSession.html">DropboxSession</a> for how to authorize it.</p>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 297</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>, <span class="ruby-identifier">root</span>=<span class="ruby-string">&quot;app_folder&quot;</span>, <span class="ruby-identifier">locale</span>=<span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">session</span>.<span class="ruby-identifier">get_access_token</span>

    <span class="ruby-ivar">@root</span> = <span class="ruby-identifier">root</span>.<span class="ruby-identifier">to_s</span>  <span class="ruby-comment"># If they passed in a symbol, make it a string</span>

    <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> [<span class="ruby-string">&quot;dropbox&quot;</span>,<span class="ruby-string">&quot;app_folder&quot;</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@root</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">DropboxError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;root must be :dropbox or :app_folder&quot;</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@root</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;app_folder&quot;</span>
        <span class="ruby-comment">#App Folder is the name of the access type, but for historical reasons</span>
        <span class="ruby-comment">#sandbox is the URL root component that indicates this</span>
        <span class="ruby-ivar">@root</span> = <span class="ruby-string">&quot;sandbox&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-ivar">@locale</span> = <span class="ruby-identifier">locale</span>
    <span class="ruby-ivar">@session</span> = <span class="ruby-identifier">session</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-account_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">account_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns account info in a Hash object</p>

<p>For a detailed description of what this call returns, visit: <a
href="https://www.dropbox.com/developers/docs#account-info">www.dropbox.com/developers/docs#account-info</a></p>
          

          
          <div class="method-source-code" id="account_info-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">account_info</span>()
    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_get</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-string">&quot;/account/info&quot;</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- account_info-source -->
          
        </div>

        

        
      </div><!-- account_info-method -->

    
      <div id="method-i-file_copy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">file_copy</span><span
            class="method-args">(from_path, to_path)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Copy a file or folder to a new location.</p>

<p>Arguments:</p>
<ul><li>
<p>from_path: The path to the file or folder to be copied.</p>
</li><li>
<p>to_path: The destination path of the file or folder to be copied. This
parameter should include the destination filename (e.g. from_path:
‘/test.txt’, to_path: ‘/dir/test.txt’). If there’s already a file
at the to_path, this copy will be renamed to be unique.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A hash with the metadata of the new copy of the file or folder. For a
detailed description of what this call returns, visit: <a
href="https://www.dropbox.com/developers/docs#fileops-copy">www.dropbox.com/developers/docs#fileops-copy</a></p>
</li></ul>
          

          
          <div class="method-source-code" id="file_copy-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 482</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">file_copy</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">to_path</span>)
    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">&quot;root&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@root</span>,
        <span class="ruby-string">&quot;from_path&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">format_path</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-keyword">false</span>),
        <span class="ruby-string">&quot;to_path&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">format_path</span>(<span class="ruby-identifier">to_path</span>, <span class="ruby-keyword">false</span>),
    }
    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_post</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-string">&quot;/fileops/copy&quot;</span>, <span class="ruby-identifier">params</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- file_copy-source -->
          
        </div>

        

        
      </div><!-- file_copy-method -->

    
      <div id="method-i-file_create_folder" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">file_create_folder</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Create a folder.</p>

<p>Arguments:</p>
<ul><li>
<p>path: The path of the new folder.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A hash with the metadata of the newly created folder. For a detailed
description of what this call returns, visit: <a
href="https://www.dropbox.com/developers/docs#fileops-create-folder">www.dropbox.com/developers/docs#fileops-create-folder</a></p>
</li></ul>
          

          
          <div class="method-source-code" id="file_create_folder-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 501</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">file_create_folder</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">&quot;root&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@root</span>,
        <span class="ruby-string">&quot;path&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">format_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-keyword">false</span>),
    }
    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_post</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-string">&quot;/fileops/create_folder&quot;</span>, <span class="ruby-identifier">params</span>)

    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- file_create_folder-source -->
          
        </div>

        

        
      </div><!-- file_create_folder-method -->

    
      <div id="method-i-file_delete" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">file_delete</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Deletes a file</p>

<p>Arguments:</p>
<ul><li>
<p>path: The path of the file to delete</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A Hash with the metadata of file just deleted. For a detailed description
of what this call returns, visit: <a
href="https://www.dropbox.com/developers/docs#fileops-delete">www.dropbox.com/developers/docs#fileops-delete</a></p>
</li></ul>
          

          
          <div class="method-source-code" id="file_delete-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 520</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">file_delete</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">&quot;root&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@root</span>,
        <span class="ruby-string">&quot;path&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">format_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-keyword">false</span>),
    }
    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_post</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-string">&quot;/fileops/delete&quot;</span>, <span class="ruby-identifier">params</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- file_delete-source -->
          
        </div>

        

        
      </div><!-- file_delete-method -->

    
      <div id="method-i-file_move" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">file_move</span><span
            class="method-args">(from_path, to_path)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Moves a file</p>

<p>Arguments:</p>
<ul><li>
<p>from_path: The path of the file to be moved</p>
</li><li>
<p>to_path: The destination path of the file or folder to be moved If the file
or folder already exists, it will be renamed to be unique.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A Hash with the metadata of file or folder just moved. For a detailed
description of what this call returns, visit: <a
href="https://www.dropbox.com/developers/docs#fileops-delete">www.dropbox.com/developers/docs#fileops-delete</a></p>
</li></ul>
          

          
          <div class="method-source-code" id="file_move-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 540</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">file_move</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">to_path</span>)
    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">&quot;root&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@root</span>,
        <span class="ruby-string">&quot;from_path&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">format_path</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-keyword">false</span>),
        <span class="ruby-string">&quot;to_path&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">format_path</span>(<span class="ruby-identifier">to_path</span>, <span class="ruby-keyword">false</span>),
    }
    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_post</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-string">&quot;/fileops/move&quot;</span>, <span class="ruby-identifier">params</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- file_move-source -->
          
        </div>

        

        
      </div><!-- file_move-method -->

    
      <div id="method-i-get_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_file</span><span
            class="method-args">(from_path, rev=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Download a file</p>

<p>Args:</p>
<ul><li>
<p>from_path: The path to the file to be downloaded</p>
</li><li>
<p>rev: A previous revision value of the file to be downloaded</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>The file contents.</p>
</li></ul>
          

          
          <div class="method-source-code" id="get_file-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 411</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_file</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">rev</span>=<span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">response</span> = <span class="ruby-identifier">get_file_impl</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">rev</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>, <span class="ruby-identifier">raw</span>=<span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_file-source -->
          
        </div>

        

        
      </div><!-- get_file-method -->

    
      <div id="method-i-get_file_and_metadata" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_file_and_metadata</span><span
            class="method-args">(from_path, rev=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Download a file and get its metadata.</p>

<p>Args:</p>
<ul><li>
<p>from_path: The path to the file to be downloaded</p>
</li><li>
<p>rev: A previous revision value of the file to be downloaded</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>The file contents.</p>
</li><li>
<p>The file metadata as a hash.</p>
</li></ul>
          

          
          <div class="method-source-code" id="get_file_and_metadata-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 425</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_file_and_metadata</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">rev</span>=<span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">response</span> = <span class="ruby-identifier">get_file_impl</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">rev</span>)
    <span class="ruby-identifier">parsed_response</span> = <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>, <span class="ruby-identifier">raw</span>=<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">metadata</span> = <span class="ruby-identifier">parse_metadata</span>(<span class="ruby-identifier">response</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">parsed_response</span>, <span class="ruby-identifier">metadata</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_file_and_metadata-source -->
          
        </div>

        

        
      </div><!-- get_file_and_metadata-method -->

    
      <div id="method-i-media" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">media</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns a direct link to a media file All of Dropbox’s API methods
require OAuth, which may cause problems in situations where an application
expects to be able to hit a URL multiple times (for example, a media player
seeking around a video file). This method creates a time-limited URL that
can be accessed without any authentication.</p>

<p>Arguments:</p>
<ul><li>
<p>path: The file to stream.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A Hash object that looks like the following:</p>

<pre>{'url': 'https://dl.dropbox.com/0/view/wvxv1fw6on24qw7/file.mov', 'expires': 'Thu, 16 Sep 2011 01:01:25 +0000'}</pre>
</li></ul>
          

          
          <div class="method-source-code" id="media-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 664</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">media</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_get</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-node">&quot;/media/#{@root}#{format_path(path)}&quot;</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- media-source -->
          
        </div>

        

        
      </div><!-- media-method -->

    
      <div id="method-i-metadata" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">metadata</span><span
            class="method-args">(path, file_limit=10000, list=true, hash=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Retrives metadata for a file or folder</p>

<p>Arguments:</p>
<ul><li>
<p>path: The path to the file or folder.</p>
</li><li>
<p>list: Whether to list all contained files (only applies when path refers to
a folder).</p>
</li><li>
<p>file_limit: The maximum number of file entries to return within a folder.
If the number of files in the directory exceeds this limit, an exception is
raised. The server will return at max 10,000 files within a folder.</p>
</li><li>
<p>hash: Every directory listing has a hash parameter attached that can then
be passed back into this function later to save on bandwidth. Rather than
returning an unchanged folder’s contents, if the hash matches a <a
href="DropboxNotModified.html">DropboxNotModified</a> exception is raised.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A Hash object with the metadata of the file or folder (and contained files
if appropriate).  For a detailed description of what this call returns,
visit: <a
href="https://www.dropbox.com/developers/docs#metadata">www.dropbox.com/developers/docs#metadata</a></p>
</li></ul>
          

          
          <div class="method-source-code" id="metadata-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 569</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">metadata</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">file_limit</span>=<span class="ruby-value">10000</span>, <span class="ruby-identifier">list</span>=<span class="ruby-keyword">true</span>, <span class="ruby-identifier">hash</span>=<span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">&quot;file_limit&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">file_limit</span>.<span class="ruby-identifier">to_s</span>,
        <span class="ruby-string">&quot;list&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">to_s</span>
    }

    <span class="ruby-identifier">params</span>[<span class="ruby-string">&quot;hash&quot;</span>] = <span class="ruby-identifier">hash</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>

    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_get</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-node">&quot;/metadata/#{@root}#{format_path(path)}&quot;</span>, <span class="ruby-identifier">params</span>=<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPRedirection</span>
            <span class="ruby-identifier">raise</span> <span class="ruby-constant">DropboxNotModified</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;metadata not modified&quot;</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- metadata-source -->
          
        </div>

        

        
      </div><!-- metadata-method -->

    
      <div id="method-i-put_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">put_file</span><span
            class="method-args">(to_path, file_obj, overwrite=false, parent_rev=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Uploads a file to a server.  This uses the HTTP PUT upload method for
simplicity</p>

<p>Arguments:</p>
<ul><li>
<p>to_path: The directory path to upload the file to. If the destination
directory does not yet exist, it will be created.</p>
</li><li>
<p>file_obj: A file-like object to upload. If you would like, you can pass a
string as file_obj.</p>
</li><li>
<p>overwrite: Whether to overwrite an existing file at the given path.
[default is False] If overwrite is False and a file already exists there,
<a href="Dropbox.html">Dropbox</a> will rename the upload to make sure it
doesn’t overwrite anything. You must check the returned metadata to know
what this new name is. This field should only be True if your intent is to
potentially clobber changes to a file that you don’t know about.</p>
</li><li>
<p>parent_rev: The rev field from the ‘parent’ of this upload. [optional]
If your intent is to update the file at the given path, you should pass the
parent_rev parameter set to the rev value from the most recent metadata you
have of the existing file at that path. If the server has a more recent
version of the file at the specified path, it will automatically rename
your uploaded file, spinning off a conflict. Using this parameter
effectively causes the overwrite parameter to be ignored. The file will
always be overwritten if you send the most-recent parent_rev, and it will
never be overwritten you send a less-recent one.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>a Hash containing the metadata of the newly uploaded file.  The file may
have a different name if it conflicted.</p>
</li></ul>

<p>Simple Example</p>

<pre>client = DropboxClient(session, :app_folder)
#session is a DropboxSession I've already authorized
client.put_file('/test_file_on_dropbox', open('/tmp/test_file'))</pre>

<p>This will upload the “/tmp/test_file” from my computer into the root of
my App’s app folder and call it “test_file_on_dropbox”. The file will
not overwrite any pre-existing file.</p>
          

          
          <div class="method-source-code" id="put_file-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 387</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">put_file</span>(<span class="ruby-identifier">to_path</span>, <span class="ruby-identifier">file_obj</span>, <span class="ruby-identifier">overwrite</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">parent_rev</span>=<span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">path</span> = <span class="ruby-node">&quot;/files_put/#{@root}#{format_path(to_path)}&quot;</span>

    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">'overwrite'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">overwrite</span>.<span class="ruby-identifier">to_s</span>
    }

    <span class="ruby-identifier">params</span>[<span class="ruby-string">'parent_rev'</span>] = <span class="ruby-identifier">parent_rev</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parent_rev</span>.<span class="ruby-identifier">nil?</span>

    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_put</span>(<span class="ruby-identifier">build_url</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">params</span>, <span class="ruby-identifier">content_server</span>=<span class="ruby-keyword">true</span>),
                               {<span class="ruby-string">&quot;Content-Type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;application/octet-stream&quot;</span>},
                               <span class="ruby-identifier">file_obj</span>)

    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- put_file-source -->
          
        </div>

        

        
      </div><!-- put_file-method -->

    
      <div id="method-i-restore" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">restore</span><span
            class="method-args">(path, rev)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Restore a file to a previous revision.</p>

<p>Arguments:</p>
<ul><li>
<p>path: The file to restore. Note that folders can’t be restored.</p>
</li><li>
<p>rev: A previous rev value of the file to be restored to.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A Hash object with a list the metadata of the file or folders restored For
a detailed description of what this call returns, visit: <a
href="https://www.dropbox.com/developers/docs#search">www.dropbox.com/developers/docs#search</a></p>
</li></ul>
          

          
          <div class="method-source-code" id="restore-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 643</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">restore</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rev</span>)
    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">'rev'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">rev</span>.<span class="ruby-identifier">to_s</span>
    }

    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_post</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-node">&quot;/restore/#{@root}#{format_path(path)}&quot;</span>, <span class="ruby-identifier">params</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- restore-source -->
          
        </div>

        

        
      </div><!-- restore-method -->

    
      <div id="method-i-revisions" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">revisions</span><span
            class="method-args">(path, rev_limit=1000)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Retrive revisions of a file</p>

<p>Arguments:</p>
<ul><li>
<p>path: The file to fetch revisions for. Note that revisions are not
available for folders.</p>
</li><li>
<p>rev_limit: The maximum number of file entries to return within a folder.
The server will return at max 1,000 revisions.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A Hash object with a list of the metadata of the all the revisions of all
matches files (up to rev_limit entries) For a detailed description of what
this call returns, visit: <a
href="https://www.dropbox.com/developers/docs#revisions">www.dropbox.com/developers/docs#revisions</a></p>
</li></ul>
          

          
          <div class="method-source-code" id="revisions-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 622</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">revisions</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">rev_limit</span>=<span class="ruby-value">1000</span>)

    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">'rev_limit'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">rev_limit</span>.<span class="ruby-identifier">to_s</span>
    }

    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_get</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-node">&quot;/revisions/#{@root}#{format_path(path)}&quot;</span>, <span class="ruby-identifier">params</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)

<span class="ruby-keyword">end</span></pre>
          </div><!-- revisions-source -->
          
        </div>

        

        
      </div><!-- revisions-method -->

    
      <div id="method-i-search" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">search</span><span
            class="method-args">(path, query, file_limit=1000, include_deleted=false)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Search directory for filenames matching query</p>

<p>Arguments:</p>
<ul><li>
<p>path: The directory to search within</p>
</li><li>
<p>query: The query to search on (3 character minimum)</p>
</li><li>
<p>file_limit: The maximum number of file entries to return/ If the number of
files exceeds this limit, an exception is raised. The server will return at
max 1,000</p>
</li><li>
<p>include_deleted: Whether to include deleted files in search results</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A Hash object with a list the metadata of the file or folders matching
query inside path.  For a detailed description of what this call returns,
visit: <a
href="https://www.dropbox.com/developers/docs#search">www.dropbox.com/developers/docs#search</a></p>
</li></ul>
          

          
          <div class="method-source-code" id="search-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 598</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">search</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">query</span>, <span class="ruby-identifier">file_limit</span>=<span class="ruby-value">1000</span>, <span class="ruby-identifier">include_deleted</span>=<span class="ruby-keyword">false</span>)
    <span class="ruby-identifier">params</span> = {
        <span class="ruby-string">'query'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">query</span>,
        <span class="ruby-string">'file_limit'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">file_limit</span>.<span class="ruby-identifier">to_s</span>,
        <span class="ruby-string">'include_deleted'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">include_deleted</span>.<span class="ruby-identifier">to_s</span>
    }

    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_get</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-node">&quot;/search/#{@root}#{format_path(path)}&quot;</span>, <span class="ruby-identifier">params</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- search-source -->
          
        </div>

        

        
      </div><!-- search-method -->

    
      <div id="method-i-shares" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">shares</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Get a URL to share a media file Shareable links created on <a
href="Dropbox.html">Dropbox</a> are time-limited, but don’t require any
authentication, so they can be given out freely. The time limit should
allow at least a day of shareability, though users have the ability to
disable a link from their account if they like.</p>

<p>Arguments:</p>
<ul><li>
<p>path: The file to share.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>A Hash object that looks like the following example:</p>

<pre>{'url': 'http://www.dropbox.com/s/m/a2mbDa2', 'expires': 'Thu, 16 Sep 2011 01:01:25 +0000'}</pre>

<p>For a detailed description of what this call returns, visit:</p>

<pre>https://www.dropbox.com/developers/docs#share</pre>
</li></ul>
          

          
          <div class="method-source-code" id="shares-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 683</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">shares</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@session</span>.<span class="ruby-identifier">do_get</span> <span class="ruby-identifier">build_url</span>(<span class="ruby-node">&quot;/shares/#{@root}#{format_path(path)}&quot;</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- shares-source -->
          
        </div>

        

        
      </div><!-- shares-method -->

    
      <div id="method-i-thumbnail" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">thumbnail</span><span
            class="method-args">(from_path, size='large')</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Download a thumbnail for an image.</p>

<p>Arguments:</p>
<ul><li>
<p>from_path: The path to the file to be thumbnailed.</p>
</li><li>
<p>size: A string describing the desired thumbnail size. At this time,
‘small’, ‘medium’, and ‘large’ are officially supported sizes
(32x32, 64x64, and 128x128 respectively), though others may be available.
Check <a
href="https://www.dropbox.com/developers/docs#thumbnails">www.dropbox.com/developers/docs#thumbnails</a>
for more details. [defaults to large]</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>The thumbnail data</p>
</li></ul>
          

          
          <div class="method-source-code" id="thumbnail-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 699</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">thumbnail</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">size</span>=<span class="ruby-string">'large'</span>)
    <span class="ruby-identifier">response</span> = <span class="ruby-identifier">thumbnail_impl</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">size</span>)
    <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>, <span class="ruby-identifier">raw</span>=<span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- thumbnail-source -->
          
        </div>

        

        
      </div><!-- thumbnail-method -->

    
      <div id="method-i-thumbnail_and_metadata" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">thumbnail_and_metadata</span><span
            class="method-args">(from_path, size='large')</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Download a thumbnail for an image alongwith the image’s metadata.</p>

<p>Arguments:</p>
<ul><li>
<p>from_path: The path to the file to be thumbnailed.</p>
</li><li>
<p>size: A string describing the desired thumbnail size. See thumbnail() for
details.</p>
</li></ul>

<p>Returns:</p>
<ul><li>
<p>The thumbnail data</p>
</li><li>
<p>The metadata for the image as a hash</p>
</li></ul>
          

          
          <div class="method-source-code" id="thumbnail_and_metadata-source">
            <pre><span class="ruby-comment"># File lib/dropbox_sdk.rb, line 713</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">thumbnail_and_metadata</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">size</span>=<span class="ruby-string">'large'</span>)
    <span class="ruby-identifier">response</span> = <span class="ruby-identifier">thumbnail_impl</span>(<span class="ruby-identifier">from_path</span>, <span class="ruby-identifier">size</span>)
    <span class="ruby-identifier">parsed_response</span> = <span class="ruby-identifier">parse_response</span>(<span class="ruby-identifier">response</span>, <span class="ruby-identifier">raw</span>=<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">metadata</span> = <span class="ruby-identifier">parse_metadata</span>(<span class="ruby-identifier">response</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">parsed_response</span>, <span class="ruby-identifier">metadata</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- thumbnail_and_metadata-source -->
          
        </div>

        

        
      </div><!-- thumbnail_and_metadata-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

